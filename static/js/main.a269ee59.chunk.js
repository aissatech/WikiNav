(this.webpackJsonpwikinav=this.webpackJsonpwikinav||[]).push([[0],{502:function(e,t,n){},503:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(68),r=n.n(i),c=n(175),o=n(26),s=n(74),l=n(554),u=n(132),d=n(111),j=n(59),b=n(10),h=n(2),f=Object(a.createContext)(),m=function(e){var t=e.children,n=Object(s.c)({language:Object(s.d)(s.b,"en"),title:Object(s.d)(s.b,"Chocolate")}),i=Object(b.a)(n,2),r=i[0],c=i[1];Object(a.useEffect)((function(){c(r,"replace")}),[]);var o=[r,function(e,t){r[e]!==t&&c(Object(j.a)({},e,t),"replaceIn")}];return Object(h.jsx)(f.Provider,{value:o,children:t})},v=function(){var e=Object(a.useContext)(f);if(!e)throw new Error("useSearchState requires a SearchStateContext to be set");return e},g=n.p+"static/media/Wikimedia-Foundation-logo.edc07470.svg",p=function(){return Object(h.jsx)("header",{className:"wmf-header",children:Object(h.jsx)("section",{children:Object(h.jsxs)("a",{href:"https://research.wikimedia.org/",children:[Object(h.jsx)("img",{src:g,alt:"Wikimedia Foundation logo"}),"Wikimedia Research"]})})})},O=n(18),x=n.n(O),w=n(31),k=n(48),y=n.n(k),N=n(277),F="sources",S="destinations",T=["other-search","other-empty","other-internal","other-other","Main_Page","other-external"],E=function(e){return Math.round(100*(e+Number.EPSILON))/100},C=function(e,t){return e.map((function(e){var n=e.views;return E(100*n/t)}))},P=function(e,t){return e.map((function(e,n){var a=e.views;return E(100*a/t[n])}))},L=function(e){return null===e||void 0===e?void 0:e.map((function(e){return e.title}))},M=function(e){return null===e||void 0===e?void 0:e.map((function(e){return e.views}))},R=function(e,t){return e+t.views},z=function(e){return null===e||void 0===e?void 0:e.reduce(R,0)},I=function(e){return e.replaceAll(" ","_")},W=function(e){return e.replaceAll("_"," ")},A=function(e){return e>999?"".concat(parseFloat((e/1e3).toFixed(1)),"k"):e},q=["January","February","March","April","May","June","July","August","September","October","November","December"],_=function(e){var t=e.name,n=v(),i=Object(b.a)(n,2),r=i[0],c=r.language,o=r.title,s=i[1],l=Object(a.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(a.useState)(null),m=Object(b.a)(f,2),g=m[0],p=m[1],O=function(){var e=Object(w.a)(x.a.mark((function e(n,a){var i,r,c,o,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://".concat(n,".wikipedia.org/w/api.php?action=query&titles=").concat(a,"&redirects&format=json&formatversion=2&origin=*"),e.next=3,y.a.get(o);case 3:l=e.sent,(u=null===(i=l.data.query)||void 0===i||null===(r=i.redirects)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.to)?(j(!0),p(W(a)),s(t,I(u))):p(null);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d?j(!d):O(c,o)}),[c,o]),g?Object(h.jsxs)("div",{className:"redirect",children:[Object(h.jsx)("span",{className:"redirect-icon",children:Object(h.jsx)(N.a,{size:"24px"})}),"The title ",Object(h.jsx)("strong",{children:g})," redirects here. Learn more about"," ",Object(h.jsx)("a",{href:"https://en.wikipedia.org/wiki/Wikipedia:Redirect",target:"_blank",rel:"noreferrer",children:"Wikipedia redirects"}),"."]}):null},V=function(e){var t=e.className,n=e.children;return Object(h.jsx)("div",{className:"instruction ".concat(t),children:n})},B=n(24),D=n(19),H=n(556),J="https://wikinav.wmcloud.org/api/v1",U=function(){var e=Object(w.a)(x.a.mark((function e(t,n,a,i){var r,c,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=encodeURIComponent(n),c="".concat(J,"/").concat(t,"/").concat(r,"/").concat(a,"/").concat(i),e.next=4,y.a.head(c);case 4:return o=e.sent,s=o.headers["total-count"],e.next=8,y.a.get("".concat(c,"?limit=").concat(s));case 8:return o=e.sent,e.abrupt("return",o.data.results);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),Y=function(e,t,n){return U(e,t,F,n)},G=function(e,t,n){return U(e,t,S,n)},K=function(){var e=Object(w.a)(x.a.mark((function e(){var t,n,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(J,"/latest/meta"),e.next=3,y.a.get(n);case 3:return a=e.sent,i={month:null===a||void 0===a?void 0:a.data.month,languages:null===a||void 0===a||null===(t=a.data.languages)||void 0===t?void 0:t.map((function(e){return{value:e,label:"".concat(e,".wikipedia.org")}}))},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest";return Object(H.a)(["sources",e,t,n],(function(){return Y(e,t,n)}),{staleTime:1/0,enabled:!!n})}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest";return Object(H.a)(["destinations",e,t,n],(function(){return G(e,t,n)}),{staleTime:1/0,enabled:!!n})}var Z=function(){var e=Object(w.a)(x.a.mark((function e(t,n,a){var i,r,c,o,s,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://".concat(t,".wikipedia.org/w/api.php?action=query&titles=").concat(n,"&prop=langlinks&format=json&formatversion=2&lllimit=500&origin=*"),e.next=3,y.a.get(s);case 3:return l=e.sent,u=null===(i=l.data.query)||void 0===i||null===(r=i.pages[0])||void 0===r||null===(c=r.langlinks)||void 0===c?void 0:c.filter((function(e){var t=e.lang;return a.includes(t)})),u=(null===(o=u)||void 0===o?void 0:o.map((function(e){var t=e.title;return[e.lang,I(t)]})))||[],e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(w.a)(x.a.mark((function e(t,n,a){var i,r,c,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.join("|"),c="https://".concat(t,".wikipedia.org/w/api.php?action=query&titles=").concat(r,"&prop=langlinks&format=json&formatversion=2&lllimit=500&lllang=").concat(a,"&origin=*"),e.next=4,y.a.get(c);case 4:return o=e.sent,s=null===(i=o.data.query)||void 0===i?void 0:i.pages.map((function(e){var t=e.title,n=e.langlinks;return{title:I(t),langlink:n&&I(n[0].title)}})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function ee(){return Object(H.a)(["metadata"],(function(){return K()}),{staleTime:1/0})}var te=n(92),ne={multiValue:function(e,t){return t.data.isFixed?Object(D.a)(Object(D.a)({},e),{},{backgroundColor:"gray"}):e},multiValueLabel:function(e,t){return t.data.isFixed?Object(D.a)(Object(D.a)({},e),{},{fontWeight:"bold",color:"white",paddingRight:6}):e},multiValueRemove:function(e,t){return t.data.isFixed?Object(D.a)(Object(D.a)({},e),{},{display:"none"}):e}},ae=function(e){return e.filter((function(e){return e.isFixed})).concat(e.filter((function(e){return!e.isFixed})))},ie=function(e){var t=e.fixed,n=e.options,i=e.handleSelection,r=e.handleRemoval,c=Object(a.useState)(),o=Object(b.a)(c,2),s=o[0],l=o[1];Object(a.useEffect)((function(){l({value:ae([t])})}),[t]);return Object(h.jsx)("div",{children:s&&Object(h.jsx)(te.a,{value:s.value,isMulti:!0,styles:ne,isClearable:s.value.some((function(e){return!e.isFixed})),className:"basic-multi-select",classNamePrefix:"select",onChange:function(e,a){var c=a.action,o=a.option,s=a.removedValue;switch(c){case"select-option":i(o.value);break;case"remove-value":case"pop-value":if(s.isFixed)return;r([s]);break;case"clear":e=[t],r(n)}e=ae(e),l({value:e})},options:n})})},re=n(279);function ce(){return Object(h.jsx)("div",{className:"loader-container",children:Object(h.jsx)(re.ScaleLoader,{color:"#000",loading:!0,size:150})})}var oe=n(557);var se=n(292),le=function(e){var t=e.data,n=e.keys;return Object(h.jsx)("div",{className:"horizontal-bar",children:Object(h.jsx)(se.a,{data:t.sort((function(e,t){return e[n[0]]-t[n[0]]})),keys:n,indexBy:"title",margin:{top:38,right:28,bottom:25,left:120},padding:.3,groupMode:"grouped",layout:"horizontal",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderWidth:10,borderColor:{theme:"background"},borderRadius:1,axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickValues:6,tickRotation:0,legendPosition:"middle",legendOffset:50},axisLeft:{tickSize:10,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-50,format:function(e){return e.length>12?Object(h.jsxs)("tspan",{children:["".concat(e.substring(0,12),"..."),Object(h.jsx)("title",{children:e})]}):e}},enableGridX:!0,enableGridY:!1,enableLabel:!1,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker","1.6"]]},animate:!0,motionStiffness:90,motionDamping:15,enableStackTooltip:!0,legends:[{dataFrom:"keys",anchor:"top-right",direction:"row",justify:!1,translateX:0,translateY:-28,itemsSpacing:2,itemWidth:70,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolShape:"circle",symbolSize:13,effects:[{on:"hover",style:{itemOpacity:1}}]}]})})},ue=function(e){return e.some((function(e){return e.isError}))},de=function(e){return e.some((function(e){return e.isLoading}))},je=function(e,t){return E(100*e/t)},be=function(e){var t=e.language,n=e.direction,a=e.clickstream,i=e.selectedOptions,r=null===a||void 0===a?void 0:a.slice(0,10),c=z(a),o=function(e){var t;return Object(oe.a)(null!==(t=null===e||void 0===e?void 0:e.map((function(e){var t=e.language,n=e.title,a=e.direction,i=e.month,r=void 0===i?"latest":i;return{queryKey:["clickstream",t,n,a,r],queryFn:function(){return U(t,n,a,r)},staleTime:1/0}})))&&void 0!==t?t:[])}(i.map((function(e){return Object(D.a)(Object(D.a)({},e),{},{direction:n})}))),s=function(e,t,n){var a;return Object(oe.a)(null!==(a=null===n||void 0===n?void 0:n.map((function(n){return{queryKey:["titlesInLanguage",e,t,n],queryFn:function(){return $(e,t,n)},staleTime:1/0}})))&&void 0!==a?a:[])}(t,L(r),i.map((function(e){return e.language}))),l=o.map((function(e){var t=e.data;return z(t)})),u=r.map((function(e){var n=e.title,a=e.views,r=Object(j.a)({title:n},t,je(a,c));return null===i||void 0===i||i.forEach((function(e,t){var a,i,c,u,d=e.language,j=null===(a=s[t].data)||void 0===a||null===(i=a.find((function(e){return e.title===n})))||void 0===i?void 0:i.langlink,b=null===(c=o[t].data)||void 0===c||null===(u=c.find((function(e){return e.title===(null!==j&&void 0!==j?j:n)})))||void 0===u?void 0:u.views;r[d]=je(b,l[t])})),r}));return de(o)||de(s)?Object(h.jsx)(ce,{}):((ue(o)||ue(s))&&console.log("Error occurred during fetching selected languages..."),Object(h.jsx)(le,{data:u,keys:[t].concat(Object(B.a)(null===i||void 0===i?void 0:i.map((function(e){return e.language}))))}))},he=function(){return Object(h.jsx)("div",{className:"error-container",children:"An error occurred while fetching data for the current title. Try another one."})},fe=function(){var e=v(),t=Object(b.a)(e,1)[0],n=t.language,i=t.title,r=X(n,i),c=r.isLoading,o=r.isError,s=r.data,l=Q(n,i),u=l.isLoading,d=l.isError,j=l.data,f=ee().data,m=(null!==f&&void 0!==f?f:{}).languages,g=function(e,t,n){return Object(H.a)(["titleInLanguages",e,t,e],(function(){return Z(e,t,n)}),{staleTime:1/0,enabled:!!n})}(n,i,function(e){return null===e||void 0===e?void 0:e.map((function(e){return e.value}))}(m)),p=g.isLoading,O=g.isError,x=g.data,w=Object(a.useState)(),k=Object(b.a)(w,2),y=k[0],N=k[1];if(Object(a.useEffect)((function(){return N([])}),[n,i]),c||u||p)return Object(h.jsx)(ce,{});if(o||d||O)return Object(h.jsx)(he,{});var T=x&&new Map(x),E=m.find((function(e){return e.value===n}));E.isFixed=!0;var C=m.filter((function(e){return e.value!==n}));C=C.map((function(e){return Object(D.a)(Object(D.a)({},e),{},{isFixed:!1})}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"language-select",children:Object(h.jsx)(ie,{fixed:E,handleSelection:function(e){N([].concat(Object(B.a)(y),[{language:e,title:T.get(e)}]))},handleRemoval:function(e){var t=y.filter((function(t){var n=t.language;return!e.find((function(e){return e.value===n}))}));N(t)},options:C})}),Object(h.jsx)("h3",{className:"subsection-text",children:"Incoming Pageviews"}),Object(h.jsxs)("div",{className:"comparison-container",children:[Object(h.jsx)("div",{className:"barchart",children:Object(h.jsx)(be,{language:n,direction:F,clickstream:s,selectedOptions:y})}),Object(h.jsx)("div",{className:"barchart-label",children:"Percentage of Incoming Pageviews"})]}),Object(h.jsx)("h3",{className:"subsection-text",children:"Outgoing Pageviews"}),Object(h.jsxs)("div",{className:"comparison-container",children:[Object(h.jsx)("div",{className:"barchart",children:Object(h.jsx)(be,{language:n,direction:S,clickstream:j,selectedOptions:y})}),Object(h.jsx)("div",{className:"barchart-label",children:"Percentage of Outgoing Pageviews"})]})]})},me=function(e){var t=e.name,n=v(),a=Object(b.a)(n,2),i=a[0].language,r=a[1],c=ee().data,o=(null!==c&&void 0!==c?c:{}).languages;return Object(h.jsx)(te.a,{placeholder:"".concat(i,".wikipedia.org"),value:null===o||void 0===o?void 0:o.find((function(e){return e.value===i})),cacheOptions:!0,onChange:function(e){return r(t,e.value)},defaultValue:null===o||void 0===o?void 0:o[0],options:o,noOptionsMessage:function(){return null},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}},maxMenuHeight:175,theme:function(e){return Object(D.a)(Object(D.a)({},e),{},{colors:Object(D.a)(Object(D.a)({},e.colors),{},{neutral50:"black"})})}})},ve=n(141),ge=n.n(ve),pe=n(287),Oe=n.n(pe),xe=function(){var e=Object(w.a)(x.a.mark((function e(t,n,a,i){var r,c,o,s,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=encodeURIComponent(n),o="".concat("https://wikimedia.org/api/rest_v1/metrics/pageviews/per-article","/").concat(t,".wikipedia/all-access/user/").concat(c,"/monthly/").concat(i,"010100/").concat(i,"123100"),e.next=4,y.a.get(o);case 4:return s=e.sent,l=s.data.items,e.abrupt("return",l&&(null===(r=l[parseInt(a,10)-1])||void 0===r?void 0:r.views));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}();function we(e,t,n,a){return Object(H.a)(["monthlyViews",e,t,n,a],(function(){return xe(e,t,n,a)}),{staleTime:1/0,enabled:!(!n||!a)})}function ke(e,t,n,a){return Object(oe.a)(t&&n&&a?t.map((function(t){return{queryKey:["monthlyViews",e,t,n,a],queryFn:function(){return xe(e,t,n,a)},staleTime:1/0}})):[])}var ye=[{value:10,label:"top 10"},{value:20,label:"top 20"}],Ne=function(e,t){return Array(e).fill(e).concat(Object(B.a)(Array(t).keys()).map((function(t){return e+t+1})))},Fe=function(e,t,n){return[].concat(Object(B.a)(L(t)),[e]).concat(L(n))},Se=function(e,t){return M(e).concat(M(t))},Te=function(e){var t,n,i,r,c=e.name,o=v(),s=Object(b.a)(o,2),l=s[0],u=l.language,d=l.title,j=s[1],f=X(u,d),m=f.isLoading,g=f.isError,p=f.data,O=Q(u,d),x=O.isLoading,w=O.isError,k=O.data,y=ee().data,N=null!==(t=null===y||void 0===y?void 0:y.month.split("-"))&&void 0!==t?t:[],F=Object(b.a)(N,2),S=F[0],E=F[1],M=we(u,d,E,S),R=M.isLoading,z=M.isError,I=M.data,W=ke(u,L(null===k||void 0===k?void 0:k.slice(0,30)),E,S),A=Object(a.useState)(10),q=Object(b.a)(A,2),_=q[0],V=q[1],D=Object(a.useState)(!0),H=Object(b.a)(D,2),J=H[0],U=H[1],Y=J?null===p||void 0===p?void 0:p.slice(0,_):null===(n=function(e){return null===e||void 0===e?void 0:e.filter((function(e){var t=e.title;return!T.includes(t)}))}(p))||void 0===n?void 0:n.slice(0,_),G=null===k||void 0===k?void 0:k.slice(0,_);return m||x||R||W.some((function(e){return e.isLoading}))?Object(h.jsx)(ce,{}):g||w||z||W.some((function(e){return e.isError}))?Object(h.jsx)(he,{}):Object(h.jsxs)("div",{className:"sankey",children:[Object(h.jsxs)("div",{className:"sankey-controls",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(Oe.a,{className:"toggle",id:"include-other",defaultChecked:J,icons:!1,onChange:function(){return U(!J)}}),Object(h.jsx)("span",{id:"include-other-label",className:"toggle-label",children:"Include views from sources other than Wiki articles"})]}),Object(h.jsx)(te.a,{className:"limit-select",options:ye,onChange:function(e){return V(e.value)},defaultValue:ye[0],isSearchable:!1})]}),Object(h.jsx)(ge.a,{data:[{type:"sankey",orientation:"h",arrangement:"fixed",node:{pad:30,thickness:10,line:{width:0},label:Fe(d,Y,G),hoverinfo:"none",color:"#0670de"},link:{source:(i=Y.length,r=G.length,Object(B.a)(Array(i).keys()).concat(Array(r).fill(i))),target:Ne(Y.length,G.length),value:Se(Y,G),color:"#edf6fc",customdata:C(Y,I).concat(P(G,W.map((function(e){return e.data})))),hovertemplate:"<b>Source</b>: %{source.label}<br><b>Target</b>: %{target.label}<br><b>%{customdata}%</b> of <b>%{target.label}'s</b> views for the month"}}],layout:{autosize:!0,margin:{l:10,r:10,t:30,b:30},font:{size:10}},config:{displaylogo:!1,modeBarButtonsToRemove:["lasso2d","select2d","hoverClosestCartesian","hoverCompareCartesian"]},onClick:function(e){var t=e.points;(function(e){return T.includes(e)})(t[0].label)||j(c,t[0].label)},useResizeHandler:!0,style:{width:"100%",height:"100%"}})]})},Ee=n(288),Ce=n.n(Ee),Pe=function(e){var t,n,a,i=e.clickstream,r=e.clickstreamPercentages,c=e.tableTitle,o=e.columnNames,s=i.slice(-1)[0].views,l=i[0].views,u=Math.min.apply(Math,Object(B.a)(r)),d=Math.max.apply(Math,Object(B.a)(r)),j=function(e,t,n){return"rgba(50, 166, 255, ".concat(((e-t)/(n-t)).toFixed(1)||0,")")},b=[{when:function(){return!0},style:function(e){return{backgroundColor:j(e.views,s,l)}}}],f=[{when:function(){return!0},style:function(e){return{backgroundColor:j(e.pov,u,d)}}}],m=[{name:null!==(t=null===o||void 0===o?void 0:o[0])&&void 0!==t?t:"Title",selector:"title",sortable:!0,wrap:!0},{name:null!==(n=null===o||void 0===o?void 0:o[1])&&void 0!==n?n:"Views",selector:"views",sortable:!0,conditionalCellStyles:b},{name:null!==(a=null===o||void 0===o?void 0:o[2])&&void 0!==a?a:"Percentage of Views",selector:"pov",sortable:!0,conditionalCellStyles:f}],v=i.map((function(e,t){var n=e.title,a=e.views;return{id:t,title:W(n),views:a,pov:parseFloat(r[t])||"-"}}));return Object(h.jsx)(Ce.a,{title:c,columns:m,data:v,defaultSortField:"views",defaultSortAsc:!1})},Le=function(){var e,t=v(),n=Object(b.a)(t,1)[0],a=n.language,i=n.title,r=X(a,i),c=r.isLoading,o=r.isError,s=r.data,l=Q(a,i),u=l.isLoading,d=l.isError,j=l.data,f=ee().data,m=null!==(e=null===f||void 0===f?void 0:f.month.split("-"))&&void 0!==e?e:[],g=Object(b.a)(m,2),p=g[0],O=g[1],x=we(a,i,O,p),w=x.isLoading,k=x.isError,y=x.data,N=ke(a,L(null===j||void 0===j?void 0:j.slice(0,30)),O,p),F=null===s||void 0===s?void 0:s.slice(0,10),S=null===j||void 0===j?void 0:j.slice(0,10);return c||u||w||N.some((function(e){return e.isLoading}))?Object(h.jsx)(ce,{}):o||d||k||N.some((function(e){return e.isError}))?Object(h.jsx)(he,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Pe,{clickstream:F,clickstreamPercentages:C(F,y),tableTitle:"Incoming Pageviews",columnNames:["Source","Views","Percentage Of Views"]}),Object(h.jsx)(Pe,{clickstream:S,clickstreamPercentages:P(S,N.map((function(e){return e.data}))),tableTitle:"Outgoing Pageviews",columnNames:["Destination","Views","Percentage Of Views"]})]})},Me=n(291),Re=function(e){var t=e.name,n=v(),i=Object(b.a)(n,2),r=i[0],c=r.language,o=r.title,s=i[1],l=Object(a.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1];return Object(h.jsx)(Me.a,{cacheOptions:!0,value:{title:o.replaceAll("_"," ")||" "},getOptionLabel:function(e){return e.title},getOptionValue:function(e){return e.title.replaceAll(" ","_")},loadOptions:function(){var e="https://".concat(c,".wikipedia.org/w/api.php?action=query&list=prefixsearch&format=json&pssearch=").concat(d,"&origin=*");return fetch(e).then((function(e){return e.json()})).then((function(e){return e.query.prefixsearch}))},onInputChange:function(e){return j(e)},onChange:function(e){return s(t,e.title.replaceAll(" ","_"))},noOptionsMessage:function(){return"Enter one or more characters to get started."},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}},maxMenuHeight:175,theme:function(e){return Object(D.a)(Object(D.a)({},e),{},{colors:Object(D.a)(Object(D.a)({},e.colors),{},{neutral50:"black"})})}})},ze=function(){var e=function(e){var t=e.label,n=e.info;return Object(h.jsxs)("div",{className:"treemap-legend-row",children:[Object(h.jsx)("div",{className:"treemap-legend-label",children:t}),Object(h.jsx)("div",{className:"treemap-legend-info",children:n})]})};return Object(h.jsxs)("div",{className:"treemap-legend",children:[Object(h.jsx)(e,{label:"articles",info:"main namespace articles"}),Object(h.jsx)(e,{label:"other-internal",info:"other Wikimedia projects"}),Object(h.jsx)(e,{label:"other-search",info:"search engines"}),Object(h.jsx)(e,{label:"other-external",info:"other external sites"}),Object(h.jsx)(e,{label:"other-empty",info:"empty referrer"}),Object(h.jsx)(e,{label:"other-other",info:"everything else"}),Object(h.jsx)(e,{label:"filtered",info:"referrer not in clickstream"})]})},Ie=function(){var e,t,n,a=v(),i=Object(b.a)(a,1)[0],r=i.language,c=i.title,o=X(r,c),s=o.isLoading,l=o.isError,u=o.data,d=ee().data,j=null!==(e=null===d||void 0===d?void 0:d.month.split("-"))&&void 0!==e?e:[],f=Object(b.a)(j,2),m=f[0],g=we(r,c,f[1],m),p=g.isLoading,O=g.isError,x=g.data;if(s||p)return Object(h.jsx)(ce,{});if(l||O)return Object(h.jsx)(he,{});var w=z(u),k=null!==(t=null===(n=function(e){return null===e||void 0===e?void 0:e.filter((function(e){var t=e.title;return T.includes(t)}))}(u))||void 0===n?void 0:n.map((function(e){return"Main_Page"===e.title?Object(D.a)(Object(D.a)({},e),{},{title:"main-page"}):e})))&&void 0!==t?t:[],y=Math.max(w,x),N=[{title:"all pageviews",views:y}].concat(Object(B.a)(k),[{title:"articles",views:w-z(k)},{title:"filtered",views:y-w}]),F=Array(N.length-1).fill("all pageviews");return F.unshift(""),Object(h.jsxs)("div",{className:"treemap-container",children:[Object(h.jsx)("div",{className:"treemap",children:Object(h.jsx)(ge.a,{data:[{type:"treemap",branchvalues:"total",labels:L(N),values:M(N),parents:F,customdata:C(N,y),texttemplate:"<b>%{label}</b><br>%{percentParent}",hovertemplate:"<b>%{label}</b><br>Pageviews: %{value}<br>%{customdata}%<extra></extra>",marker:{colors:["FFF","0E4D92","0080FF","6593F5","73C2FB","588BAE","73C2FB","588BAE"]}}],layout:{autosize:!0,margin:{l:10,r:10,t:30,b:30}},config:{displaylogo:!1,modeBarButtons:[["toImage"]]},useResizeHandler:!0,style:{width:"100%",height:"100%"}})}),Object(h.jsx)(ze,{})]})},We=function(e){var t=e.incoming,n=e.figure,a=e.text,i=e.footnote;return Object(h.jsxs)("div",{className:"overview-card",children:[Object(h.jsx)("span",{className:"overview-circle",children:t?Object(h.jsx)(d.a,{}):Object(h.jsx)(d.b,{})}),Object(h.jsx)("div",{className:"overview-figure",children:n}),Object(h.jsx)("span",{className:i?"footnote":"",children:a})]})},Ae=function(){var e,t,n=v(),a=Object(b.a)(n,1)[0],i=a.language,r=a.title,c=X(i,r),o=c.isLoading,s=c.isError,l=c.data,u=Q(i,r),d=u.isLoading,j=u.isError,f=u.data,m=ee().data,g=null!==(e=null===m||void 0===m?void 0:m.month.split("-"))&&void 0!==e?e:[],p=Object(b.a)(g,2),O=p[0],x=p[1],w=we(i,r,x,O),k=w.isLoading,y=w.isError,N=w.data,F=A(z(l)),S=A(z(f)),T=null===l||void 0===l?void 0:l.length,E=null===f||void 0===f?void 0:f.length;return o||d||k?Object(h.jsx)(ce,{}):s||j||y?Object(h.jsx)(he,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{className:"paragraph",children:["This tool provides insights into how readers of Wikipedia explore the content when learning about a given topic. ",Object(h.jsx)("br",{}),"The following analyses and visualizations have been generated by processing the publicly available"," ",Object(h.jsx)("a",{href:"https://dumps.wikimedia.org/other/clickstream/readme.html",children:"Wikipedia clickstream"})," ","dump from"," ",Object(h.jsxs)("strong",{children:[x&&(t=x,q[parseInt(t,10)-1]),", ",O]}),". The dataset contains the number of times a given link from a source-page to a target-page in Wikipedia was clicked in that month."]}),Object(h.jsxs)("div",{className:"overview-container",children:[Object(h.jsx)(We,{incoming:!0,figure:F,text:"incoming pageviews",footnote:!0}),Object(h.jsx)(We,{incoming:!1,figure:S,text:"outgoing pageviews"}),Object(h.jsx)(We,{incoming:!0,figure:T,text:"unique sources"}),Object(h.jsx)(We,{incoming:!1,figure:E,text:"unique destinations"})]}),Object(h.jsxs)("div",{className:"footnote-content margin-top-3",children:["The actual number of incoming pageviews received by ",W(r)," ","is ",A(N),'. However, any (source, destination) pair with 10 or fewer observations was removed from the clickstream in order to maintain anonymity. The pageviews from these removed observations are referred to as "filtered" elsewhere on this page.']})]})},qe=n(187),_e=function(){var e=[["Muniza","https://www.github.com/mnzpk"],["Martin (WMF)","https://meta.wikimedia.org/wiki/User:MGerlach_(WMF)"],["Isaac (WMF)","https://meta.wikimedia.org/wiki/User:Isaac_(WMF)"]];return Object(h.jsx)("footer",{className:"wmf-footer",children:Object(h.jsxs)("section",{children:[Object(h.jsxs)("div",{children:["Developed by"," ",e.map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(h.jsx)("a",{href:a,children:n},n)})).reduce((function(t,n,a){return[t,a===e.length-1?" and ":", ",n]})),"."]}),Object(h.jsx)("a",{href:"https://www.github.com/mnzpk/wikinav",children:"Source code"}),Object(h.jsx)(qe.a,{size:"4px",className:"footer-separator"}),Object(h.jsx)("a",{href:"https://www.github.com/mnzpk/wikinav/blob/main/README.md#license",children:"License"}),Object(h.jsx)(qe.a,{size:"4px",className:"footer-separator"}),Object(h.jsx)("a",{href:"https://wikitech.wikimedia.org/wiki/Portal:Toolforge",children:"Toolforge"}),Object(h.jsxs)("div",{className:"disclaimer",children:["No guarantees are made that this tool will be maintained.",Object(h.jsx)("br",{}),"No additional personal data is collected by this tool per the Cloud Services"," ",Object(h.jsx)("a",{href:"https://wikitech.wikimedia.org/wiki/Wikitech:Cloud_Services_Terms_of_use",children:"Terms of Use"}),"."]})]})})},Ve=function(e,t){return E(100*e/t)},Be=function(){var e=v(),t=Object(b.a)(e,1)[0],n=t.language,a=t.title,i=X(n,a),r=i.isLoading,c=i.isError,o=i.data,s=Q(n,a),l=s.isLoading,u=s.isError,d=s.data,f=ee().data,m=null===f||void 0===f?void 0:f.month,g=m&&function(e){var t=e.split("-"),n=new Date(t[0],t[1]-1,15);return n.setMonth(n.getMonth()-1),"".concat(n.getFullYear(),"-").concat(function(e){var t=e.getMonth()+1;return t<10?"0".concat(t):"".concat(t)}(n))}(m),p=X(n,a,g),O=p.isLoading,x=p.isError,w=p.data,k=Q(n,a,g),y=k.isLoading,N=k.isError,F=k.data;if(r||l||O||y)return Object(h.jsx)(ce,{});if(c||u||x||N)return Object(h.jsx)(he,{});var S=function(e,t){var n=z(e),a=z(t);return e.slice(0,10).map((function(e){var i,r,c=e.title,o=e.views;return r={title:c},Object(j.a)(r,m,Ve(o,n)),Object(j.a)(r,g,Ve(null===(i=t.find((function(e){return e.title===c})))||void 0===i?void 0:i.views,a)),r}))},T=S(o,w),E=S(d,F),C=[m,g];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{className:"subsection-text",children:"Incoming Pageviews"}),Object(h.jsxs)("div",{className:"comparison-container",children:[Object(h.jsx)("div",{className:"barchart",children:Object(h.jsx)(le,{data:T,keys:C})}),Object(h.jsx)("p",{className:"barchart-label",children:"Percentage of Incoming Pageviews"})]}),Object(h.jsx)("h3",{className:"subsection-text",children:"Outgoing Pageviews"}),Object(h.jsxs)("div",{className:"comparison-container",children:[Object(h.jsx)("div",{className:"barchart",children:Object(h.jsx)(le,{data:E,keys:C})}),Object(h.jsx)("p",{className:"barchart-label",children:"Percentage of Outgoing Pageviews"})]})]})},De=new l.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),He=function(e){var t=e.text,n=t.replaceAll(" ","-");return Object(h.jsxs)("h2",{className:"section-text",id:n,children:[Object(h.jsx)("a",{className:"section-anchor",href:"#".concat(n),children:Object(h.jsx)(d.c,{size:"20px"})}),t]})},Je=Object(o.e)((function(){return Object(h.jsx)(u.a,{client:De,children:Object(h.jsx)(m,{children:Object(h.jsxs)("div",{className:"main-container",children:[Object(h.jsx)(p,{}),Object(h.jsx)("section",{className:"title-text margin-top-3",children:"WikiNav"}),Object(h.jsx)("div",{className:"controls-container",children:Object(h.jsxs)("section",{className:"controls margin-top-3",children:[Object(h.jsx)(me,{name:"language"}),Object(h.jsx)(Re,{name:"title"})]})}),Object(h.jsxs)("section",{className:"content",children:[Object(h.jsx)(_,{name:"title"}),Object(h.jsx)(He,{text:"Overview"}),Object(h.jsx)(Ae,{}),Object(h.jsx)(He,{text:"Reader Navigation"}),Object(h.jsx)(Te,{name:"title"}),Object(h.jsxs)(V,{className:"paragraph",children:[Object(h.jsx)("strong",{children:"Reading the chart: "}),Object(h.jsx)("span",{children:"This chart visualizes incoming and outgoing traffic, to and from the selected article. The nodes at either end represent sources and destinations. Hovering over them shows what percentage of traffic they send to or receive from the article and clicking their labels changes the selected title to that article."})]}),Object(h.jsx)(He,{text:"Sources of Traffic"}),Object(h.jsx)(Ie,{}),Object(h.jsxs)(V,{className:"paragraph",children:[Object(h.jsx)("strong",{children:"Reading the chart: "}),Object(h.jsxs)("span",{children:["This chart visualizes the percentage of traffic each source sends to the selected title. The legend shows the"," ",Object(h.jsx)("a",{href:"https://meta.wikimedia.org/wiki/Research:Wikipedia_clickstream#Data_Preparation",children:"naming scheme"})," ","that Wikipedia uses to identify different types of sources."]})]}),Object(h.jsx)(He,{text:"Comparison Over Time"}),Object(h.jsx)(Be,{}),Object(h.jsxs)(V,{className:"paragraph",children:[Object(h.jsx)("strong",{children:"Reading the chart: "}),Object(h.jsx)("span",{children:"These charts compare the composition of traffic over time by looking up the top sources and destinations for the current article in the clickstream dump from the previous month."})]}),Object(h.jsx)(He,{text:"Comparison Across Languages"}),Object(h.jsx)(fe,{}),Object(h.jsxs)(V,{className:"paragraph",children:[Object(h.jsx)("strong",{children:"Reading the charts: "}),Object(h.jsx)("span",{children:"These charts compare the composition of traffic across multiple language editions of the selected title by looking up the top sources and destinations for the current article in the clickstream dump for the selected languages. You can select one or more languages to compare to from the search bar above."})]}),Object(h.jsx)(He,{text:"Numbers in Context"}),Object(h.jsxs)(V,{className:"paragraph",children:[Object(h.jsx)("strong",{children:"Reading the tables: "}),Object(h.jsxs)("span",{children:["These tables summarize the visualizations above and provide additional context. For incoming pageviews, the percentage of pageviews is for the current page that comes from each source-page. For outgoing pageviews, the percentage of pageviews is for the target page that comes from the current page.",Object(h.jsx)("br",{}),"To sort the table by a certain column, click the column header."]})]}),Object(h.jsx)(Le,{})]}),Object(h.jsx)(_e,{})]})})})}));n(502);r.a.render(Object(h.jsx)(c.a,{children:Object(h.jsx)(s.a,{ReactRouterRoute:o.a,children:Object(h.jsx)(Je,{})})}),document.getElementById("root"))}},[[503,1,2]]]);